

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Design Tip #95 Patterns to Avoid when Modeling Header/Line Item Transactions</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description">
		<meta name="application-name">
		<meta name="title">
		<link href="../../../favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="../../../resources/main.css">
	</head>
	

	<body>
	
		<div class="jumbotron1" id="jumbotron1">
			<div class="container">
				<h1 class="article-header">Design Tip #95 Patterns to Avoid when Modeling Header/Line Item Transactions</h1>
				<div class="article-date">mi&#233;rcoles, 3 de octubre de 2007</div>
			</div>
		</div>
	
		<hr id="anchor-point"/>
		<div class="container-fluid">
			<a href="../../../archive/bi/dwh/design-tip-95-patterns-to-avoid-when-modeling-headerline-item-transactions.html#" class="navigationBars">
				<div class="iconBars closed">
					<span id="icon-bar1" class="iconBar colorChange background"></span>
					<span id="icon-bar2" class="iconBar colorChange background"></span>
					<span id="icon-bar3" class="iconBar colorChange background"></span>
				</div>
			</a>
			<div class="navLinks">
				<a id="link1" class="colorChange navLink link1" href="../../../index.html">Home</a>
				<a class="iconLink" href="../../../index.html"><i title="Home" id="icon1" class="fa fa-home colorChange link1"></i></a>
	
				<a id="link2" class="colorChange navLink link2" href="../../../about.html">Sobre mi</a>
				<a class="iconLink" href="../../../about.html"><i title="Sobre mi" id="icon2" class="fa fa-envelope colorChange link2"></i></a>

				<a id="link2" class="colorChange navLink link3" href="../../../archive.html">Archivo</a>
				<a class="iconLink" href="../../../about.html"><i title="Archivo" id="icon3" class="fa fa-archive colorChange link3"></i></a>
			</div>			
			
			<div class="row">
				<div class="content col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
					<div class="article">
						<p class="article-description"></p>				
						<div class="article-content">
							<div class="pf-content">
							<p>Many transaction processing systems consist of a transaction header â€œparentâ€ with multiple line itemÂ â€œchildren.â€ Regardless of your industry, you can probably identify source systems in your organizationÂ with this basic structure. When itâ€™s time to model this data for DW/BI, many designers merelyÂ reproduce these familiar operational header and line constructs in the dimensional world. In thisÂ Design Tip, we describe two common, albeit flawed, approaches for modeling header/line itemÂ information using invoicing data as a case study. Sometimes visualizing flawed designs can help youÂ more readily identify similar problems with your own schemas.</p>
							<p><strong>Bad Idea #1</strong><br>
							In this scenario, the transaction header file is virtually replicated in the DW/BI environment as aÂ dimension. The transaction header dimension contains all the data from its operational equivalent.Â The natural key for this dimension is the transaction number itself. The grain of the fact table is oneÂ row per transaction line item, but thereâ€™s not much dimensionality associated with it since mostÂ descriptive context is embedded in the transaction header dimension.</p>
							<p><a class="ether-frame ether-frame-1 alignnone" href="../../../wp-content/uploads/2012/06/dt95-e13401714627571.png" rel="shadowbox"><img title="dt95" src="../../../wp-content/uploads/2012/06/dt95-e13401714627571.png" alt="" width="600" height="165"></a></p>
							<p>While this design accurately represents the parent/child relationship, there are obvious flaws. TheÂ transaction header dimension is likely very large, especially relative to the fact table itself. If there areÂ typically five line items per transaction, then the dimension is 20% as large as the fact table. UsuallyÂ there are orders of magnitude differences between the size of a fact table and its associatedÂ dimensions. Also, dimensions donâ€™t normally grow at nearly the same rate as the fact table. With thisÂ design, youâ€™d add one row to the dimension table and an average of five rows to the fact table forÂ every new transaction. Any analysis of the transactionâ€™s interesting characteristics, such as theÂ customer, warehouse, or shipper involved, would need to traverse this large dimension table.</p>
							<p><strong>Bad Idea #2</strong><br>
							In this example, the transaction header is no longer treated as a monolithic dimension but as a factÂ table instead. The headerâ€™s descriptive information associated is grouped into dimensionsÂ surrounding the header fact. The line item fact table (identical in structure and granularity as the firstÂ diagram) joins to the header fact based on the transaction number.</p>
							<p><img class="ether-frame ether-frame-1 alignnone" title="dt95b" src="../../../wp-content/uploads/2012/06/dt95b-e13401716399741.png" alt="" width="600" height="289"></p>
							<p>Once again, this design accurately represents the parent/child relationship of the transaction headerÂ and line items, but there are still flaws. Every time the user wants to slice-and-dice the line facts byÂ any of the header attributes, theyâ€™ll need to join a large header fact table to an even larger line factÂ table.</p>
							<p><strong>Recommended Structure for Header/Line Item Transactions</strong><br>
							The second scenario more closely resembles a proper dimensional model with separate dimensionsÂ uniquely describing the core descriptive elements of the business, but itâ€™s not quite there yet. RatherÂ than holding onto the operational notion of a transaction header â€œobject,â€ we recommend that youÂ bring all the dimensionality of the header down to the line items.</p>
							<p><img class="ether-frame ether-frame-1 alignnone" title="dt95c" src="../../../wp-content/uploads/2012/06/dt95c-e13401846779561.png" alt="" width="600" height="222"></p>
							<p>Once again, this model represents the data relationships from the transaction header/line sourceÂ system. But weâ€™ve abandoned the operational mentality surrounding a header file. The headerâ€™sÂ natural key, the transaction number, is still present in our design, but itâ€™s treated as a degenerateÂ dimension.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../../resources/jquery.min.js"></script>
		<script src="../../../resources/menu.js"></script>
			
		
		<a id="scrollUp" href="../../../archive/bi/dwh/design-tip-95-patterns-to-avoid-when-modeling-headerline-item-transactions.html#top" title="Volver" style="position: fixed; z-index: 2147483647; display: none;">
			<i class="fa fa-chevron-up"></i>
		</a>
	</body>
</html>