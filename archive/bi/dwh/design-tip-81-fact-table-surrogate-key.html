

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Design Tip #81 Fact Table Surrogate Key</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description">
		<meta name="application-name">
		<meta name="title">
		<link href="../../../favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="../../../resources/main.css">
	</head>
	

	<body>
	
		<div class="jumbotron1" id="jumbotron1">
			<div class="container">
				<h1 class="article-header">Design Tip #81 Fact Table Surrogate Key</h1>
				<div class="article-date">jueves, 6 de julio de 2006</div>
			</div>
		</div>
	
		<hr id="anchor-point"/>
		<div class="container-fluid">
			<a href="../../../archive/bi/dwh/design-tip-81-fact-table-surrogate-key.html#" class="navigationBars">
				<div class="iconBars closed">
					<span id="icon-bar1" class="iconBar colorChange background"></span>
					<span id="icon-bar2" class="iconBar colorChange background"></span>
					<span id="icon-bar3" class="iconBar colorChange background"></span>
				</div>
			</a>
			<div class="navLinks">
				<a id="link1" class="colorChange navLink link1" href="../../../index.html">Home</a>
				<a class="iconLink" href="../../../index.html"><i title="Home" id="icon1" class="fa fa-home colorChange link1"></i></a>
	
				<a id="link2" class="colorChange navLink link2" href="../../../about.html">Sobre mi</a>
				<a class="iconLink" href="../../../about.html"><i title="Sobre mi" id="icon2" class="fa fa-envelope colorChange link2"></i></a>

				<a id="link2" class="colorChange navLink link3" href="../../../archive.html">Archivo</a>
				<a class="iconLink" href="../../../about.html"><i title="Archivo" id="icon3" class="fa fa-archive colorChange link3"></i></a>
			</div>			
			
			<div class="row">
				<div class="content col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
					<div class="article">
						<p class="article-description"></p>				
						<div class="article-content">
							<div class="pf-content">
							<p>Meaningless integer keys, otherwise known as surrogate keys, are commonly used as primary keysÂ for dimension tables in data warehouse designs. Our students frequently ask us &#8211; what about factÂ tables? Should a unique surrogate key be assigned for every row in a fact table? Although for theÂ logical design of a fact table, the answer is no, surprisingly we find a fact table surrogate key may beÂ helpful at the physical level. We only recommend creating surrogate keys for fact tables when certainÂ special circumstance described in this design tip apply.</p>
							<p>As a quick reminder, surrogate keys are meaningless (aka not-meaningful, artificial, sequenceÂ numbers, warehouse, etc.) keys, typically defined as an integer data type, and sequentially assignedÂ by the data warehouse team to serve as the primary keys of the dimension tables. Surrogate keysÂ provide a number of important benefits for dimensions including avoiding reliance on awkward â€œsmartâ€Â keys made up of codes from the dimensionâ€™s source systems, protecting the data warehouse fromÂ changes in the source systems, enabling integration of data from disparate source systems, supportÂ for type 2 slowly changing dimensions attributes, space savings in the fact tables when theseÂ dimension keys are embedded in the fact tables as foreign keys, and improved indexing and queryÂ performance.</p>
							<p>But in a fact table, the primary key is almost always defined as a subset of the foreign keys suppliedÂ by the dimensions. In most environments this composite key will suffice as the primary key to the factÂ table. There is typically no advantage of assigning a surrogate key to the fact rows at a logical levelÂ because we have already defined what makes a fact table row unique. And, by its nature, theÂ surrogate key would be worthless for querying.</p>
							<p>However, there are a few circumstances when assigning a surrogate key to the rows in a fact table isÂ beneficial:</p>
							<ol>
							<li>Sometimes the business rules of the organization legitimately allow multiple identical rows to existÂ for a fact table. Normally as a designer, you try to avoid this at all costs by searching the sourceÂ system for some kind of transaction time stamp to make the rows unique. But occasionally youÂ are forced to accept this undesirable input. In these situations it will be necessary to create aÂ surrogate key for the fact table to allow the identical rows to be loaded.</li>
							<li>Certain ETL techniques for updating fact rows are only feasible if a surrogate key is assigned toÂ the fact rows. Specifically, one technique for loading updates to fact rows is to insert the rows toÂ be updated as new rows, then to delete the original rows as a second step as a singleÂ transaction. The advantages of this technique from an ETL perspective are improved loadÂ performance, improved recovery capability and improved audit capabilities. The surrogate keyÂ for the fact table rows is required as multiple identical primary keys will often exist for the old andÂ new versions of the updated fact rows between the time of the insert of the updated row and theÂ delete of the old row.</li>
							<li>A similar ETL requirement is to determine exactly where a load job was suspended, either toÂ resume loading or back put the job entirely. A sequentially assigned surrogate key makes thisÂ task straightforward.</li>
							</ol>
							<p>Remember, surrogate keys for dimension tables are a great idea. Surrogate keys for fact tables areÂ not logically required but can be very helpful in the back room ETL processing.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../../resources/jquery.min.js"></script>
		<script src="../../../resources/menu.js"></script>
			
		
		<a id="scrollUp" href="../../../archive/bi/dwh/design-tip-81-fact-table-surrogate-key.html#top" title="Volver" style="position: fixed; z-index: 2147483647; display: none;">
			<i class="fa fa-chevron-up"></i>
		</a>
	</body>
</html>