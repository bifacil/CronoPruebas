

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Fact Tables</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description">
		<meta name="application-name">
		<meta name="title">
		<link href="../../../favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="../../../resources/main.css">
	</head>
	

	<body>
	
		<div class="jumbotron1" id="jumbotron1">
			<div class="container">
				<h1 class="article-header">Fact Tables</h1>
				<div class="article-date">mi&#233;rcoles, 5 de noviembre de 2008</div>
			</div>
		</div>
	
		<hr id="anchor-point"/>
		<div class="container-fluid">
			<a href="../../../archive/bi/dwh/fact-tables.html#" class="navigationBars">
				<div class="iconBars closed">
					<span id="icon-bar1" class="iconBar colorChange background"></span>
					<span id="icon-bar2" class="iconBar colorChange background"></span>
					<span id="icon-bar3" class="iconBar colorChange background"></span>
				</div>
			</a>
			<div class="navLinks">
				<a id="link1" class="colorChange navLink link1" href="../../../index.html">Home</a>
				<a class="iconLink" href="../../../index.html"><i title="Home" id="icon1" class="fa fa-home colorChange link1"></i></a>
	
				<a id="link2" class="colorChange navLink link2" href="../../../about.html">Sobre mi</a>
				<a class="iconLink" href="../../../about.html"><i title="Sobre mi" id="icon2" class="fa fa-envelope colorChange link2"></i></a>

				<a id="link2" class="colorChange navLink link3" href="../../../archive.html">Archivo</a>
				<a class="iconLink" href="../../../about.html"><i title="Archivo" id="icon3" class="fa fa-archive colorChange link3"></i></a>
			</div>			
			
			<div class="row">
				<div class="content col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
					<div class="article">
						<p class="article-description"></p>				
						<div class="article-content">
							<div class="pf-content">
							<p>F<span style="font-family: Verdana, Arial, Helvetica, sans-serif;">act tables are the foundation of the data warehouse. They contain the fundamental measurements of the enterprise, and they are the ultimate target of most data warehouse queries. There is no point in hoisting fact tables up the flagpole unless they have been chosen to reflect urgent business priorities, have been carefully quality assured and are surrounded by dimensions that provide a wealth of entry points for constraining and grouping. Now that we have paved the way for fact tables, letâ€™s see how to build them and use them.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: small;"><strong>Stay True to the Grain</strong></span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">The first and most important design step is declaring the fact table grain. The grain is the business definition of what a single fact table record represents. The grain declaration is not a list of dimensional foreign keys that implement a primary key for the fact table. Rather, the grain is the description of the measurement event in the physical world that gives rise to a measurement. When the grocery store scanner measures the quantity and the charged price of a product being purchased, the grain is literally the beep of the scanner. That is a great grain definition!</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Immediately after declaring the grain, it is possible to list the dimensional foreign keys that exist at that grain. By declaring the grain first, the discussion of foreign keys remains grounded and precise.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">The real purpose of the fact table is to be the repository of the numeric facts that are observed during the measurement event. It is critically important for these facts to be true to the grain. The grocery store â€œbeepâ€ measures the quantity and extended price of the product being scanned. We never include other numeric measurements that violate the grain, such as the overall category sales or the sales of this product last month. Even though these other measurements might be narrowly helpful for selected calculations, they cannot be combined across fact records and they introduce weird asymmetries in the design of applications. We let our business intelligence (BI) tools compute these off-topic values at query time rather than hard coding them into our fact tables.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">We always strive to make the facts additive across the dimensions and exactly consistent with the grain. Notice that we donâ€™t store the price of the product being scanned because the price is nonadditive. Rather, we store the extended price, which can be added freely across products, stores, times and all the other dimensions.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: small;"><strong>Build Up from the Lowest Possible Grain</strong></span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">The data warehouse should always be built on fact tables expressed at the lowest possible grain. In the example, the beep of the grocery store cash register is the lowest possible grain because it cannot be divided any further. Fact tables at the lowest grain are the most expressive because they have the most complete set of possible dimensions for that business process. The beep grain fact table could have Date, Store, Product, Cashier, Manager, Customer, Promotion, Competition, Basket and even Weather if all these data sources can be marshaled when the fact records are created. Higher grain aggregated tables such as category sales by district cannot support all these dimensions and therefore are much less expressive. It is a fundamental mistake to publish only aggregated tables to the end users without making the lowest grain fact tables smoothly accessible by drilling down. Most of the false notions that dimensional tables presuppose the business question come from making this fundamental mistake.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: small;"><strong>Three Kinds of Fact Tables</strong></span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">If you stay true to the grain, then all of your fact tables can be grouped into just three types: transaction grain, periodic snapshot grain and accumulating snapshot grain (the three types are shown in Figure 1). In Figure 1, the dimensions are designated by FK (foreign key) and the numeric facts are italicized.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">The transaction grain corresponds to a measurement taken at a single instant. The grocery store beep is a transaction grain. The measured facts are valid only for that instant and for that event. The next measurement event could happen one millisecond later or next month or never. Thus, transaction grain fact tables are unpredictably sparse or dense. We have no guarantee that all the possible foreign keys will be represented. Transaction grain fact tables can be enormous, with the largest containing many billions of records.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">The periodic snapshot grain corresponds to a predefined span of time, often a financial reporting period. Figure 1 illustrates a monthly account periodic snapshot. The measured facts summarize activity during or at the end of the time span. The periodic snapshot grain carries a powerful guarantee that all of the reporting entities (such as the bank account in Figure 1) will appear in each snapshot, even if there is no activity. The periodic snapshot is predictably dense, and applications can rely on combinations of keys always being present. Periodic snapshot fact tables can also get large. A bank with 20 million accounts and a 10-year history would have 2.4 billion records in the monthly account periodic snapshot!</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">The accumulating snapshot fact table corresponds to a predictable process that has a well-defined beginning and end. Order processing, claims processing, service call resolution and college admissions are typical candidates. The grain of an accumulating snapshot for order processing, for example, is usually the line item on the order. Notice in Figure 1 that there are multiple dates representing the standard scenario that an order undergoes. Accumulating snapshot records are revisited and overwritten as the process progresses through its steps from beginning to end. Accumulating snapshot fact tables generally are much smaller than the other two types because of this overwriting strategy.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif;">Â </span></p>
							<p style="text-align: center;">Â <img class="aligncenter" src="../../../../cdn.information-management.com/media/newspics/F120108_kimball_fig1vv1027.gif" alt="" width="440" height="414"></p>
							<div></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../../resources/jquery.min.js"></script>
		<script src="../../../resources/menu.js"></script>
			
		
		<a id="scrollUp" href="../../../archive/bi/dwh/fact-tables.html#top" title="Volver" style="position: fixed; z-index: 2147483647; display: none;">
			<i class="fa fa-chevron-up"></i>
		</a>
	</body>
</html>