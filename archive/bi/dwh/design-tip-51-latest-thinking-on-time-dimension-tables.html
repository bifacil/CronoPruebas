

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Design Tip #51: Latest Thinking On Time Dimension Tables</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description">
		<meta name="application-name">
		<meta name="title">
		<link href="../../../favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="../../../resources/main.css">
	</head>
	

	<body>
	
		<div class="jumbotron1" id="jumbotron1">
			<div class="container">
				<h1 class="article-header">Design Tip #51: Latest Thinking On Time Dimension Tables</h1>
				<div class="article-date">lunes, 2 de febrero de 2004</div>
			</div>
		</div>
	
		<hr id="anchor-point"/>
		<div class="container-fluid">
			<a href="../../../archive/bi/dwh/design-tip-51-latest-thinking-on-time-dimension-tables.html#" class="navigationBars">
				<div class="iconBars closed">
					<span id="icon-bar1" class="iconBar colorChange background"></span>
					<span id="icon-bar2" class="iconBar colorChange background"></span>
					<span id="icon-bar3" class="iconBar colorChange background"></span>
				</div>
			</a>
			<div class="navLinks">
				<a id="link1" class="colorChange navLink link1" href="../../../index.html">Home</a>
				<a class="iconLink" href="../../../index.html"><i title="Home" id="icon1" class="fa fa-home colorChange link1"></i></a>
	
				<a id="link2" class="colorChange navLink link2" href="../../../about.html">Sobre mi</a>
				<a class="iconLink" href="../../../about.html"><i title="Sobre mi" id="icon2" class="fa fa-envelope colorChange link2"></i></a>

				<a id="link2" class="colorChange navLink link3" href="../../../archive.html">Archivo</a>
				<a class="iconLink" href="../../../about.html"><i title="Archivo" id="icon3" class="fa fa-archive colorChange link3"></i></a>
			</div>			
			
			<div class="row">
				<div class="content col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
					<div class="article">
						<p class="article-description"></p>				
						<div class="article-content">
							<div class="pf-content">
							<p>Virtually every fact table has one or more time related dimension foreign keys. Measurements areÂ defined at specific points of time and most measurements are repeated over time.</p>
							<p>The most common and useful time dimension is the calendar date dimension with the granularity of aÂ single day. This dimension has surprisingly many attributes. Only a few of these attributes (such asÂ month name and year) can be generated directly from an SQL date-time expression. Holidays, workÂ days, fiscal periods, week numbers, last day of month flags, and other navigational attributes mustÂ be embedded in the calendar date dimension and all date navigation should be implemented inÂ applications by using the dimensional attributes. The calendar date dimension has some veryÂ unusual properties. It is one of the only dimensions that is completely specified at the beginning ofÂ the data warehouse project. It also doesnâ€™t have a conventional source. The best way to generateÂ the calendar date dimension is to spend an afternoon with a spreadsheet and build it by hand. TenÂ years worth of days is less than 4000 rows.</p>
							<p>Every calendar date dimension needs a Date Type attribute and a Full Date attribute. These twoÂ fields comprise the natural key of the dimension table. The Date Type attribute almost always hasÂ the value â€œdateâ€ but there must be at least one record that handles the special non-applicable dateÂ situation where the recorded date is inapplicable, corrupted, or hasnâ€™t happened yet. The foreign keyÂ references in the fact table in these cases must point to a non-date date in the calendar date table!Â You need at least one of these special records in the calendar date table, but you may want toÂ distinguish several of these unusual conditions. For the inapplicable date case, the value of the DateÂ Type is â€œinapplicableâ€ or â€œNAâ€. The Full Date attribute is a full relational date stamp, and it takes onÂ the legitimate value of null for the special cases described above. Remember that the foreign key inÂ a fact table can never be null, since by definition that violates referential integrity.</p>
							<p>The calendar date primary key ideally should be a meaningless surrogate key but many ETL teamsÂ canâ€™t resist the urge to make the key a readable quantity such as 20040718 meaning July 18, 2004.Â However as with all smart keys, the few special records in the calendar date dimension will make theÂ designer play tricks with the smart key. For instance, the smart key for the inapplicable date wouldÂ have to be some nonsensical value like 99999999, and applications that tried to interpret the dateÂ key directly without using the dimension table would always have to test against this value because itÂ is not a valid date.</p>
							<p>In some fact tables time is measured below the level of calendar day, down to minute or evenÂ second. One cannot build a time dimension with every minute second of every day represented.Â There are more than 31 million seconds in a year! We want to preserve the powerful calendar dateÂ dimension and simultaneously support precise querying down to the minute or second. We may alsoÂ want to compute very precise time intervals by comparing the exact time of two fact table records.Â For these reasons we recommend a design with a calendar date dimension foreign key and a fullÂ SQL date-time stamp, both in the fact table. The calendar day component of the precise timeÂ remains as a foreign key reference to our familiar calendar day dimension. But we also embed a fullÂ SQL date-time stamp directly in the fact table for all queries requiring the extra precision. Think ofÂ this as special kind of fact, not a dimension. In this interesting case, it is not useful to make aÂ dimension with the minutes or seconds component of the precise time stamp, because theÂ calculation of time intervals across fact table records becomes too messy when trying to deal withÂ separate day and time-of-day dimensions. In previous Toolkit books, we have recommended buildingÂ such a dimension with the minutes or seconds component of time as an offset from midnight of eachÂ day, but we have come to realize that the resulting end user applications became too difficult,Â especially when trying to compute time spans. Also, unlike the calendar day dimension, there areÂ very few descriptive attributes for the specific minute or second within a day.</p>
							<p>If the enterprise has well defined attributes for time slices within a day, such as shift names, orÂ advertising time slots, an additional time-of-day dimension can be added to the design where thisÂ dimension is defined as the number of minutes (or even seconds) past midnight. Thus this time-of dayÂ dimension would either have 1440 records if the grain were minutes or 86,400 records if theÂ grain were seconds. The presence of such a time-of-day dimension does not remove the need forÂ the SQL date-time stamp described above.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../../resources/jquery.min.js"></script>
		<script src="../../../resources/menu.js"></script>
			
		
		<a id="scrollUp" href="../../../archive/bi/dwh/design-tip-51-latest-thinking-on-time-dimension-tables.html#top" title="Volver" style="position: fixed; z-index: 2147483647; display: none;">
			<i class="fa fa-chevron-up"></i>
		</a>
	</body>
</html>