

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Design Tip #166 Potential Bridge (Table) Detours</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description">
		<meta name="application-name">
		<meta name="title">
		<link href="../../../favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="../../../resources/main.css">
	</head>
	

	<body>
	
		<div class="jumbotron1" id="jumbotron1">
			<div class="container">
				<h1 class="article-header">Design Tip #166 Potential Bridge (Table) Detours</h1>
				<div class="article-date">mi&#233;rcoles, 14 de mayo de 2014</div>
			</div>
		</div>
	
		<hr id="anchor-point"/>
		<div class="container-fluid">
			<a href="../../../archive/bi/dwh/design-tip-166-potential-bridge-table-detours.html#" class="navigationBars">
				<div class="iconBars closed">
					<span id="icon-bar1" class="iconBar colorChange background"></span>
					<span id="icon-bar2" class="iconBar colorChange background"></span>
					<span id="icon-bar3" class="iconBar colorChange background"></span>
				</div>
			</a>
			<div class="navLinks">
				<a id="link1" class="colorChange navLink link1" href="../../../index.html">Home</a>
				<a class="iconLink" href="../../../index.html"><i title="Home" id="icon1" class="fa fa-home colorChange link1"></i></a>
	
				<a id="link2" class="colorChange navLink link2" href="../../../about.html">Sobre mi</a>
				<a class="iconLink" href="../../../about.html"><i title="Sobre mi" id="icon2" class="fa fa-envelope colorChange link2"></i></a>

				<a id="link2" class="colorChange navLink link3" href="../../../archive.html">Archivo</a>
				<a class="iconLink" href="../../../about.html"><i title="Archivo" id="icon3" class="fa fa-archive colorChange link3"></i></a>
			</div>			
			
			<div class="row">
				<div class="content col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
					<div class="article">
						<p class="article-description"></p>				
						<div class="article-content">
							<div class="pf-content">
							<p>Dimensional designs often need to accommodate multivalued dimensions. Patients can have multiple diagnoses. Students can have multiple majors. Consumers can have multiple hobbies or interests. Commercial customers can have multiple industry classifications. Employees can have multiple skills or certifications. Products can have multiple optional features. Bank accounts can have multiple customers. The multivalued dimension challenge is a natural and unavoidable cross-industry dilemma.</p>
							<p>A common approach for handling multivalued dimensions is to introduce a <a href="../../../data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/multivalued-dimension-bridge-table/index.html">bridge table</a>. The following figure shows a bridge table to associate multiple customers with an account. In this case, the bridge contains one row for each customer associated with an account. Similarly, a bridge table might have one row for each skill in an employeeâ€™s group of skills. Or one row for each option in a bundle of product features. Bridge tables can sit between fact and dimension tables, or alternatively, between a dimension table and its multivalued attributes (such as a customer and their hobbies or interests).</p>
							<p><a href="../../../wp-content/uploads/2014/05/DT-166-Figure.png"><img class="aligncenter wp-image-20481 size-full" src="../../../wp-content/uploads/2014/05/DT-166-Figure.png" alt="DT #166 Figure" width="667" height="121"></a></p>
							<p style="text-align: left;">TheÂ bridge table is a powerful way to handle dimensions that take on multiple values when associated with the grain of a fact tableâ€™s measurement event. Itâ€™s both scalable and flexible to handle an open ended number of values. For example, you can easily associate many diagnoses with a patientâ€™s hospital stay, and new diagnoses are easily accommodated without altering the database design. However, bridge tables have their downsides. Ease of use is often compromised, especially since some BI tools struggle to generate SQL that successfully crosses over the bridge. Another unwanted outcome is the potential over-counting that occurs when grouping by the multivalued dimension as a single fact rowâ€™s performance metrics can be associated with multiple dimension rows unless an allocation/weighting factor is assigned to each row in the bridge table.</p>
							<p style="text-align: left;">Here are several potential techniques to avoid bridge tables. However, be aware that each comes with its own potential downsides, too.</p>
							<p><em>1. Alter the fact tableâ€™s grain to resolve the many-valued dimension relationship, allocating the metrics accordingly.</em><br>
							Many-to-many relationships are typically best resolved in fact tables. For example, if multiple representatives are associated with a sales transaction, you might be able to declare the fact tableâ€™s grain to be one row per rep per sales transaction, and then allocate the sales quantity and dollars to each row. While a more natural grain might be one row per sales transaction, the subdivided grain may seem logical to the business users in this scenario. In other situations, a subdivided grain would be nonsensical. For example, if you need to represent the customersâ€™ multivalued hobbies, it wouldnâ€™t make sense to declare the grain to be one row per customer hobby per sales transaction. Thatâ€™s an unnatural grain!</p>
							<p><em>2. Designate a â€œprimaryâ€ value.</em> <strong><br>
							</strong>Declaring a primary diagnosis, primary account holder, primary major, etc. with either a single foreign key in the fact table or single attribute in the dimension table eliminates the multivalued challenge. In this scenario, all the attribute column names would be prefaced with â€œprimary.â€ Of course, coming up with the business rules to determine the primary relationship may be impossible. And subsequent analyses based solely on the primary relationship will be incomplete and/or misleading as the other multivalued dimensions and their attributes are ignored.</p>
							<p><em>3. Add multiple named attributes to the dimension table.</em> <strong><br>
							</strong>For example, if you sold pet supplies, you might include flags in the customer dimension to designate dog buyers, cat buyers, bird buyers, etc. Weâ€™re not suggesting that you include ten generically-labeled columns, such as animal buyer 1, animal buyer 2, etc. The named attribute positional design is attractive because itâ€™s easy to query in virtually any BI tool with excellent, predictable query performance. However, itâ€™s only appropriate for a fixed, limited number of options. You wouldnâ€™t want to include 150 distinct columns in a student dimension, such as art history major, for each possible major at a university. This approach isn&#8217;t very scalable, plus new values require altering the table.</p>
							<p><em>4. Add a single concatenated text string with delimited attribute values to the dimension.</em> <strong><br>
							</strong>For example, if courses can be dual taught, you might concatenate the instructorsâ€™ names into a single attribute, such as |MRoss|RKimball|. Youâ€™d need a delimiter such as a backlash or vertical bar at the beginning of the string and after each value. This approach allows the concatenated value to be easily displayed in an analysis. But there are obvious downsides. Queries would need to do a wildcard search with contains/like which are notoriously slow performing. There may be ambiguity surrounding upper and lower case values in the concatenated string. It wouldn&#8217;t be appropriate for a lengthy list of attributes. Finally, you canâ€™t readily count/sum by one of the concatenated values or group/filter by associated attributes, such as the instructorsâ€™ tenure status.</p>
							<p>Multivalued dimension attributes are a reality for many designers. The bridge table technique and the alternatives discussed in this <em>Design Tip</em> have their pluses and minuses. Thereâ€™s no single right strategy; youâ€™ll need to determine which compromises you can live with. Finally, these techniques are not mutually exclusive. For example, dimensional models often include a â€œprimaryâ€ dimension with a single foreign key in the fact table, coupled with a bridge table to represent the multivalued dimensions.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../../resources/jquery.min.js"></script>
		<script src="../../../resources/menu.js"></script>
			
		
		<a id="scrollUp" href="../../../archive/bi/dwh/design-tip-166-potential-bridge-table-detours.html#top" title="Volver" style="position: fixed; z-index: 2147483647; display: none;">
			<i class="fa fa-chevron-up"></i>
		</a>
	</body>
</html>