<!DOCTYPE html><html lang="es">
<!-- Mirrored from localhost/articulo.html?id=46 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Oct 2015 14:24:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>Forzar la inclusi&#243;n de tablas en las consultas</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="Desde el Diseñador de catálogos es posible forzar la inclusión de determinadas tablas en las consultas SQL generadas. Esta opción es útil para obligar que se apliquen determinados filtros o determinadas relaciones. " /><meta name="keywords" content="Bingo Intelligence, ayuda, Business Intelligence" /><link href="images/favicon.html" rel="shortcut icon" /><link href="ayuda.css" rel="stylesheet" type="text/css" /><link href="rss.xml" rel="alternate" type="application/rss+xml" title="Ayuda Bingo (RSS)" /><link href="http://help.bingointelligence.com/articulo.html" rel="canonical" /><!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script><![endif]--></head><body data-updated="28-Oct-2015 14:32:30"><header><div id="titulo"><a href="index.html"><img src="images/logoBI.png" alt="Business Intelligence" title="Business Intelligence" width="325" height="100" style="border:0px" /></a></div><div id="subtitulo"><h1>Forzar la inclusi&#243;n de tablas en las consultas</h1></div></header><div id="wrapper"><article><div class="contenido"><div><h3>Tablas adicionales</h3><p>Desde el Diseñador de catálogos es posible forzar la inclusión de determinadas tablas en las consultas SQL generadas. Esta opción es útil para obligar que se apliquen determinados filtros o determinadas relaciones.</p><p><span>Esta funcionalidad permite, por ejemplo, definir una política de “</span><b>Seguridad horizontal</b><span>”. La seguridad horizontal se utiliza para limitar los registros a los que tiene acceso cada usuario. De esta manera, se puede configurar que cada responsable comercial sólo acceda a sus propias tiendas, o que los </span><i>Product Manager</i><span> sólo vean las ventas de sus productos.</span></p><h3>Definir una política de seguridad horizontal</h3><p>Para aplicar la seguridad horizontal, las sentencias SQL generadas incluirán siempre un filtro que seleccione aquellos registros a los que tiene acceso cada usuario. Para ello, se tienen que seguir los siguientes pasos:</p><ul><li>Crear la tabla que definirá la visibilidad de cada usuario</li><li>Incluir esa tabla en el diagrama de tablas</li><li>Forzar la inclusión de dicha tabla en las consultas generadas</li></ul><h4>Crear la tabla que define la visibilidad de cada usuario</h4><p><span>Para definir la seguridad horizontal es necesario que exista en la base de datos una </span><i>tabla de seguridad</i><span> que defina la visibilidad de cada usuario:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/tabla-de-seguridad.png" alt="La tabla de seguridad se utiliza para definir la visibilidad de cada usuario." title="La tabla de seguridad se utiliza para definir la visibilidad de cada usuario." width="595" height="395" /></p><p>En este caso, se ha preparado una tabla que contiene el cruce de todos los usuarios y todas las tiendas, y un campo indicando si se tiene acceso o no. </p><h4>Incluir la tabla de seguridad en el diagrama</h4><p>La anterior tabla se debe incluir en el diagrama, y se debe relacionar con la tabla que se quiere filtrar.</p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/diagrama-con-seguridad.png" alt="La tabla de seguridad se tiene que incluir en el diagrama de tablas." title="La tabla de seguridad se tiene que incluir en el diagrama de tablas." width="627" height="286" /></p><p><span>En la tabla </span><i>LB_SEGURIDAD_TIENDAS</i><span> el campo </span><i>ID_TIENDA</i><span> no es único, por lo que se producirán duplicados al hacer la relación con la tabla de tiendas. Para evitar esto, </span><b>es necesario establecer un filtro sobre la tabla de seguridad. Este filtro es el que finalmente definirá la visibilidad de cada usuario. </b><span>Para ello, se debe definir el campo WHERE desde el  formulario de propiedades de las tabla:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/filtro-tabla-seguridad.png" alt="Se debe definir un filtro en la tabla de seguridad para que cada usuario sólo vea sus datos." title="Se debe definir un filtro en la tabla de seguridad para que cada usuario sólo vea sus datos." width="511" height="672" /></p><p><span>El parámetro </span><b>@USER</b><span> se sustituirá por el nombre del usuario conectado a Bingo Intelligence.</span></p><h4>Forzar la inclusión de la tabla de seguridad en las consultas</h4><p><span>El filtro definido anteriormente sólo se incluirá en las consultas que hagan referencia a la tabla de seguridad (</span><i>LB_SEGURIDAD_TIENDAS</i><span>). Por lo tanto, de alguna manera, se ha de indicar cuándo se debe incluir esa tabla. Para ello, se utilizan las </span><b>“Tablas adicionales”</b><span>.</span></p><p><span>En este ejemplo protegeremos la información de “ventas”. Es decir, dejaremos que los usuarios puedan consultar el listado de las tiendas de la organización, pero no permitiremos que tengan acceso a sus ventas. Esto se puede hacer desde las propiedades de la tabla de hechos (</span><i><b>LB_VENTAS</b></i><span>), en la pestaña “</span><b>Tablas adicionales</b><span>”: </span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/configuracion-tablas-adicionales.png" alt="Las tablas adicionales se incluirán en la query siempre que se utilice esta tabla (LB_VENTAS).&#xA;" title="Las tablas adicionales se incluirán en la query siempre que se utilice esta tabla (LB_VENTAS).&#xA;" width="481" height="667" /></p><p>De esta manera, siempre que se incluya un indicador o una dimensión que haga referencia a la tabla de ventas, se incluirá automáticamente la tabla de seguridad (y el filtro de seguridad).</p><h4>Verificación de la seguridad horizontal</h4><p><span>Una vez configurada la tabla de seguridad conviene verificar que los filtros se aplican correctamente. Para ello, podemos utilizar el </span><a href="http://www.businessintelligence.es/ayuda/articulo.html?id=43">probador de consultas</a><span>, o podemos crear un informe contra este catálogo. En ese caso, nos hemos conectado con el usuario “</span><i>demo españa</i><span>”, y hemos realizado un pequeño informe:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/informe-seguridad-horizontal.png" alt="El informe sólo muestra la información a la que el usuario tiene acceso." title="El informe sólo muestra la información a la que el usuario tiene acceso." width="504" height="607" /></p></div></div><div class="comentarios"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'bingointelligence';
var disqus_identifier = 'ayuda46';
var disqus_title = 'Forzar la inclusión de tablas en las consultas';
var disqus_url = 'articulo084d.html?id=46';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '../bingointelligence.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script></div></article><nav><aside><h4>Centro de ayuda</h4><p>Binenvenido al centro de ayuda de la plataforma de Bingo Intelligence. En estas p&#225;ginas encontrar&#225;s informaci&#243;n sobre las funcionalidades de Bingo Intelligence, y ayuda para la resoluci&#243;n de los problemas m&#225;s comunes.</p><ul><li><a href="temadcfd.html?id=4">Manual de usuario</a></li><li class="selected">Manual t&#233;cnico</li></ul></aside><aside><h4>Manual t&#233;cnico</h4><ul><li><a href="tema4ef9.html?id=12">Tabla de contenidos</a></li><li><a href="tema3a9f.html?id=6">Instalaci&#243;n</a></li><li><a href="temac3c9.html?id=8">Crear un cat&#225;logo</a><ul class="nivel2"><li><a href="articulo6396.html?id=42">&#191;Qu&#233; es un cat&#225;logo?</a></li><li><a href="articulo4944.html?id=48">C&#243;mo crear un cat&#225;logo</a></li><li><a href="articulo1e35.html?id=39">Uso de tablas agregadas</a></li><li><a href="articulo2580.html?id=43">C&#243;mo se generan las sentencias SQL</a></li><li><a href="articulo4411.html?id=37">C&#243;mo crear una conexi&#243;n a la base de datos</a></li><li><a href="articulocdef.html?id=38">Primeros pasos con el dise&#241;ador de cat&#225;logos</a></li><li><a href="articulo2568.html?id=49">El administrador de tablas y relaciones</a></li><li><a href="articulo98dc.html?id=45">Creaci&#243;n de indicadores b&#225;sicos</a></li><li><a href="articuloa916.html?id=44">Creaci&#243;n de indicadores avanzados</a></li><li class="selected">Forzar la inclusi&#243;n de tablas en las consultas</li></ul></li></ul></aside></nav></div><footer><p><span>&#169; 2010 Bingo Intelligence S.L. Todos los derechos reservados. </span><a href="http://validator.w3.org/check?uri=referer" rel="nofollow">HTML5</a><span> &#183; </span><a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" rel="nofollow">CSS3</a></p></footer></body>
<!-- Mirrored from localhost/articulo.html?id=46 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Oct 2015 14:24:24 GMT -->
</html>