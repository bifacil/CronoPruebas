<!DOCTYPE html><html lang="es">
<!-- Mirrored from localhost/articulo.html?id=44 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Oct 2015 14:23:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>Creaci&#243;n de indicadores avanzados</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="En muchos informes de negocio se utilizan indicadores acumulados desde principio de año o desde principio de mes. De este modo, se habla de las ventas YTD (year-to-date) para referirse a las ventas desde el 1 de enero, o se habla de las ventas MTD (month-to-date) para referirse a las ventas desde el primer día del mes." /><meta name="keywords" content="Bingo Intelligence, ayuda, Business Intelligence" /><link href="images/favicon.html" rel="shortcut icon" /><link href="ayuda.css" rel="stylesheet" type="text/css" /><link href="rss.xml" rel="alternate" type="application/rss+xml" title="Ayuda Bingo (RSS)" /><link href="http://help.bingointelligence.com/articulo.html" rel="canonical" /><!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script><![endif]--></head><body data-updated="28-Oct-2015 14:32:30"><header><div id="titulo"><a href="index.html"><img src="images/logoBI.png" alt="Business Intelligence" title="Business Intelligence" width="325" height="100" style="border:0px" /></a></div><div id="subtitulo"><h1>Creaci&#243;n de indicadores avanzados</h1></div></header><div id="wrapper"><article><div class="contenido"><div><h3>Indicadores acumulados</h3><p><span>En muchos informes de negocio se utilizan </span><b>indicadores acumulados</b><span> desde principio de año o desde principio de mes. De este modo, se habla de las ventas YTD (</span><i>year-to-date</i><span>) para referirse a las ventas desde el 1 de enero, o se habla de las ventas MTD (</span><i>month-to-date</i><span>) para referirse a las ventas desde el primer día del mes.</span></p><p><span>Otros indicadores acumulados habituales son los totales móviles y las medias móviles. De este modo, se habla de ventas TAM (</span><i>total-anual-móvil</i><span>) para referirse a las ventas de los últimos 12 meses, o se habla de la venta media de los últimos 7 días... </span></p><p>Otros indicadores acumulados semejantes son los saldos. El saldo de una cuenta corriente no es la suma de los saldos de cada día (es la suma de los movimientos desde el principio de la historia hasta la fecha estudiada). El personal de una empresa tampoco es la suma de las plantillas de cada mes... es la suma de las altas y bajas desde el principio de la historia.</p><p>Todos estos indicadores acumulados pueden ser definidos en el catálogo de Bingo Intelligence sin necesidad de tenerlos precalculados ni de modificar la base de datos.</p><p>Los pasos para definir estos indicadores son:</p><ul><li>Configurar la tabla de tiempo</li><li>Configurar las dimensiones de tiempo</li><li>Definir las “relaciones alternativas”</li><li>Definir los “indicadores acumulados”</li></ul><h3>Configurar la tabla de tiempo</h3><p><span>Para calcular los indicadores acumulados es necesario identificar la tabla de tiempo y definir una serie de filtros temporales. Para ello, se tiene que abrir el formulario de propiedades de la tabla de tiempo y rellenar la pestaña de configuración denominada </span><b>“Tabla de tiempo”</b><span>:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/propiedades-tabla-tiempo.png" alt="Es necesario definir los filtros de final de periodo en la tabla de tiempo." title="Es necesario definir los filtros de final de periodo en la tabla de tiempo." width="589" height="529" /></p><p><span>En ese formulario se han definido un conjunto de sentencias </span><i>WHERE </i><span>que permiten seleccionar el último día de diferentes periodos (el último día de la semana, el último día del mes, etc.).  Esta información puede estar precalculada en campos booleanos de la tabla de tiempo (</span><i>ES_ULTIMO_DIA_SEMANA</i><span>, </span><i>ES_ULTIMO_DIA_MES</i><span>, etc.), o se puede utilizar el dialecto SQL de cada gestor de base de datos para calcularlo en función del resto de campos de la tabla de tiempo.</span></p><p><span>Estos filtros son necesarios para que Bingo Intelligence genere la sentencia SQL correcta independientemente del nivel de detalle solicitado. Por ejemplo, para calcular las ventas YTD </span><b>semana a semana</b><span>, se tienen que considerar todas las ventas desde el primer día de año, hasta el domingo de cada semana.</span></p><h3>Configurar las dimensiones de tiempo</h3><p><span>Además de configurar la tabla de tiempo, se tiene que indicar el “nivel de agregación” que representa cada dimensión de tiempo del universo. En el </span><a href="http://www.businessintelligence.es/ayuda/articulo.html?id=38">catálogo de LA_BIBLIO</a><span>, por ejemplo, se han definido estas dimensiones de tiempo:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/dimensiones-de-tiempo.png" alt="Estas son las dimensiones de tiempo definidas en el catálogo." title="Estas son las dimensiones de tiempo definidas en el catálogo." width="182" height="144" /></p><p><span>Para configurarlas se tiene que acceder a sus “</span><i><b>Propiedades</b></i><span>” y en la pestaña “</span><b>Avanzado</b><span>” indicar el nivel de agregación que cada dimensión representa. De este modo se debe configurar la dimensión “Año”:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/propiedades-dimension-tiempo.png" alt="Se ha de indicar el nivel de agregación temporal que representa cada dimensión de tiempo." title="Se ha de indicar el nivel de agregación temporal que representa cada dimensión de tiempo." width="632" height="478" /></p><p>Esta operación debe realizarse para todas las dimensiones de tiempo definidas en el catálogo.</p><p>Bingo Intelligence tendrá en cuenta esta información para aplicar el filtro adecuado (entre los definidos en la configuración de la tabla de tiempo) en función de las dimensiones incluidas en cada consulta.</p><h3>Definir las relaciones alternativas</h3><p><span>Para calcular un indicador YTD se debe relacionar cada fecha de la tabla de tiempo con todas los días anteriores (del mismo año) de la tabla de hechos. Esto se realiza definiendo una </span><b>“relación alternativa”</b><span> entre la tabla de tiempo y la tabla de hechos.</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/relacion-ventas-tiempo.png" alt="Es necesario configurar la relación entre la tabla de tiempo y la tabla de hechos." title="Es necesario configurar la relación entre la tabla de tiempo y la tabla de hechos." width="522" height="339" /></p><p><span>Para definir la relación alternativa se debe abrir el formulario de </span><b>“Propiedades”</b><span> de esa relación (desde el menú contextual situado en el centro de la relación). Las relaciones alternativas se administran desde la pestaña </span><b>“Relaciones alternativas”</b><span>.</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/propiedades-relacion-admin-alternativas.png" alt="Las relaciones alternativas se administran desde el formulario de propiedades." title="Las relaciones alternativas se administran desde el formulario de propiedades." width="379" height="488" /></p><p><span>Para crear una relación alternativa se debe hacer clic en el botón </span><b>“Nueva relación alternativa”, </b><span>y aparecerá la siguiente ventana desde donde podremos modificar la relación:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/propiedades-relacion-alternativa.png" alt="Formulario de propiedades de la relqación alternativa." title="Formulario de propiedades de la relqación alternativa." width="513" height="327" /></p><p>En esta ventana se debe escribir la cláusula SQL que sustituirá a la cláusula original. Bingo Intelligence utilizará esta relación cuando se necesario. </p><h3>Definir los indicadores acumulados</h3><p>El cálculo de los “indicadores acumulados” es transparente para el usuario. Los usuarios que generan los informes únicamente ven una serie de “indicadores acumulados”, y Bingo Intelligence gestiona íntegramente la generación del SQL, haciendo uso de los filtros de la tabla de tiempo y de las relaciones alternativas si es necesario, y sin ninguna intervención particular de los usuarios.</p><p>Para que Bingo Intelligence construya correctamente las sentencias SQL, el diseñador del catálogo debe indicar qué relación alternativa debe utilizar cada indicador. Esto se especifica desde el formulario de propiedades del indicador. Para ello, creamos un nuevo indicador, y lo definimos de esta manera:</p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/propiedades-indicador-acumulado.png" alt="Es necesario indicar la relación alternativa que debe utilizar cada indicador acumulado." title="Es necesario indicar la relación alternativa que debe utilizar cada indicador acumulado." width="616" height="472" /></p><p><span>En el momento de seleccionar la relación alternativa, aparecerá un formulario con todas las relaciones del catálogo. Se debe buscar en esta lista la relación alternativa que se ha creado previamente. La relación alternativa aparecerá dentro la relación entre la tabla de tiempo (</span><i>LB_TIEMPO</i><span>) y la tabla de hechos del indicador que estamos definiendo (</span><i>LB_VENTAS</i><span>).</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/seleccionar-relacion-alternativa.png" alt="Se debe seleccionar la relación alternativa definida anteriormente." title="Se debe seleccionar la relación alternativa definida anteriormente." width="302" height="448" /></p><p>Una vez completados estos 4 pasos, los usuarios ya podrán utilizar este indicador, y Bingo Intelligence generará la sentencia SQL adecuada en cada caso.</p><p>Del mismo modo, se deben crear todos los indicadores acumulados que sean necesarios en el catálogo (Importe YTD, Ventas MTD, etc.).</p><h3>Verificación del cálculo de indicadores acumulados</h3><p><span>Para comprobar que Bingo Intelligence genera las sentencias SQL correctamente se puede utilizar el </span><a href="http://www.businessintelligence.es/ayuda/articulo.html?id=43">“Probador de consultas”</a><span> . Sin embargo, en este caso, resulta más cómodo generar algunos informes utilizando este catálogo, y verificar la corrección de los números obtenidos:</span></p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/informe-ytd.png" alt="Los indicadores acumulados se calculan correctamente." title="Los indicadores acumulados se calculan correctamente." width="601" height="650" /></p><p>Analizando los datos en pantalla se verifica que el cálculo se está realizando correctamente:</p><ul><li>Las ventas YTD en enero coinciden con las ventas de enero</li><li>Las ventas YTD en febrero, son las ventas de enero más la de febrero.</li><li>Las ventas YTD de cada mes, son las ventas del mes, más las ventas YTD del mes anterior.</li><li>En la visión diaria, los datos también están bien calculados. Las ventas YTD del 1 de febrero, son las ventas YTD de enero más las ventas de ese día.</li><li>Además, aparecen también los días en que no se ha vendido (por ejemplo, el 3 de febrero).</li></ul><p>También podemos verificar que las sentencias SQL generadas son correctas. La consulta para obtener las ventas YTD mensuales es:</p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/sql-ytd-mensual.png" alt="SELECT&#xA;   cast(LB_TIEMPO.ANYO as char(4)) AS Ano,&#xA;   LB_TIEMPO.NOMBRE_MES AS Mes,&#xA;   LB_TIEMPO.MES AS bi_orderby_Mes,&#xA;   sum(LB_VENTAS.UNIDADES) AS UnidadesYtd&#xA;FROM LB_VENTAS_DIARIAS LB_VENTAS&#xA;INNER JOIN dbo.LB_TIEMPO LB_TIEMPO ON (year(LB_VENTAS.FECHA)=year(LB_TIEMPO.FECHA) AND LB_VENTAS.FECHA&lt;=LB_TIEMPO.FECHA)&#xA;WHERE&#xA;   cast(LB_TIEMPO.ANYO as char(4))='2008'&#xA;   AND day(LB_TIEMPO.FECHA+1)=1&#xA;GROUP BY&#xA;   cast(LB_TIEMPO.ANYO as char(4)),&#xA;   LB_TIEMPO.NOMBRE_MES,&#xA;   LB_TIEMPO.MES&#xA;" title="SELECT&#xA;   cast(LB_TIEMPO.ANYO as char(4)) AS Ano,&#xA;   LB_TIEMPO.NOMBRE_MES AS Mes,&#xA;   LB_TIEMPO.MES AS bi_orderby_Mes,&#xA;   sum(LB_VENTAS.UNIDADES) AS UnidadesYtd&#xA;FROM LB_VENTAS_DIARIAS LB_VENTAS&#xA;INNER JOIN dbo.LB_TIEMPO LB_TIEMPO ON (year(LB_VENTAS.FECHA)=year(LB_TIEMPO.FECHA) AND LB_VENTAS.FECHA&lt;=LB_TIEMPO.FECHA)&#xA;WHERE&#xA;   cast(LB_TIEMPO.ANYO as char(4))='2008'&#xA;   AND day(LB_TIEMPO.FECHA+1)=1&#xA;GROUP BY&#xA;   cast(LB_TIEMPO.ANYO as char(4)),&#xA;   LB_TIEMPO.NOMBRE_MES,&#xA;   LB_TIEMPO.MES&#xA;" width="634" height="161" /></p><p><span>En la anterior consulta se ve que, efectivamente, se ha utilizado la </span><b>relación alternativa</b><span>, y que se ha incluido el filtro para mostrar las ventas acumuladas hasta el </span><b>último día del mes</b><span>.</span></p><p>La consulta para obtener las ventas YTD diarias del mes de febrero es:</p><p style="text-align:center"><img src="../businessintelligence.es/ayuda/imagenes/sql-ytd-diario.png" alt="SELECT&#xA;   LB_TIEMPO.FECHA AS Fecha,&#xA;   sum(LB_VENTAS.UNIDADES) AS UnidadesYtd&#xA;FROM LB_VENTAS_DIARIAS LB_VENTAS&#xA;INNER JOIN dbo.LB_TIEMPO LB_TIEMPO ON (year(LB_VENTAS.FECHA)=year(LB_TIEMPO.FECHA) AND LB_VENTAS.FECHA&lt;=LB_TIEMPO.FECHA)&#xA;WHERE&#xA;   LB_TIEMPO.NOMBRE_MES='Febrero'&#xA;   AND cast(LB_TIEMPO.ANYO as char(4))='2008'&#xA;GROUP BY&#xA;   LB_TIEMPO.FECHA&#xA;" title="SELECT&#xA;   LB_TIEMPO.FECHA AS Fecha,&#xA;   sum(LB_VENTAS.UNIDADES) AS UnidadesYtd&#xA;FROM LB_VENTAS_DIARIAS LB_VENTAS&#xA;INNER JOIN dbo.LB_TIEMPO LB_TIEMPO ON (year(LB_VENTAS.FECHA)=year(LB_TIEMPO.FECHA) AND LB_VENTAS.FECHA&lt;=LB_TIEMPO.FECHA)&#xA;WHERE&#xA;   LB_TIEMPO.NOMBRE_MES='Febrero'&#xA;   AND cast(LB_TIEMPO.ANYO as char(4))='2008'&#xA;GROUP BY&#xA;   LB_TIEMPO.FECHA&#xA;" width="636" height="115" /></p><p><span>En este caso la consulta también es correcta. Se ha incluido la </span><b>relación alternativa, </b><span>y no ha sido necesario incluir el </span><b>filtro del último día del periodo </b><span>(ya que en este caso la consulta incluye el detalle diario).</span></p><p>Del mismo modo, se pueden añadir otras dimensiones o filtros en la consulta. Con este mismo indicador YTD, se podrían calcular las ventas YTD de una determinada editorial o de un conjunto de tiendas... tanto a nivel diario, semanal, o mensual... y Bingo Intelligence generará la consulta adecuada en cada caso.</p><p>Este método es muy flexible y puede ser útil para muchas necesidades habituales. Sin embargo, el rendimiento puede verse penalizado si la tabla de hechos tiene muchos millones de registros. En este caso, se debe considerar la creación de tablas agregadas. De hecho, en este ejemplo, las dos consultas se han aprovechado de la existencia de la tabla agregada LB_VENTAS_DIARIAS.  </p></div></div><div class="comentarios"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'bingointelligence';
var disqus_identifier = 'ayuda44';
var disqus_title = 'Creación de indicadores avanzados';
var disqus_url = 'articuloa916.html?id=44';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '../bingointelligence.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script></div></article><nav><aside><h4>Centro de ayuda</h4><p>Binenvenido al centro de ayuda de la plataforma de Bingo Intelligence. En estas p&#225;ginas encontrar&#225;s informaci&#243;n sobre las funcionalidades de Bingo Intelligence, y ayuda para la resoluci&#243;n de los problemas m&#225;s comunes.</p><ul><li><a href="temadcfd.html?id=4">Manual de usuario</a></li><li class="selected">Manual t&#233;cnico</li></ul></aside><aside><h4>Manual t&#233;cnico</h4><ul><li><a href="tema4ef9.html?id=12">Tabla de contenidos</a></li><li><a href="tema3a9f.html?id=6">Instalaci&#243;n</a></li><li><a href="temac3c9.html?id=8">Crear un cat&#225;logo</a><ul class="nivel2"><li><a href="articulo6396.html?id=42">&#191;Qu&#233; es un cat&#225;logo?</a></li><li><a href="articulo4944.html?id=48">C&#243;mo crear un cat&#225;logo</a></li><li><a href="articulo1e35.html?id=39">Uso de tablas agregadas</a></li><li><a href="articulo2580.html?id=43">C&#243;mo se generan las sentencias SQL</a></li><li><a href="articulo4411.html?id=37">C&#243;mo crear una conexi&#243;n a la base de datos</a></li><li><a href="articulocdef.html?id=38">Primeros pasos con el dise&#241;ador de cat&#225;logos</a></li><li><a href="articulo2568.html?id=49">El administrador de tablas y relaciones</a></li><li><a href="articulo98dc.html?id=45">Creaci&#243;n de indicadores b&#225;sicos</a></li><li class="selected">Creaci&#243;n de indicadores avanzados</li><li><a href="articulo084d.html?id=46">Forzar la inclusi&#243;n de tablas en las consultas</a></li></ul></li></ul></aside></nav></div><footer><p><span>&#169; 2010 Bingo Intelligence S.L. Todos los derechos reservados. </span><a href="http://validator.w3.org/check?uri=referer" rel="nofollow">HTML5</a><span> &#183; </span><a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" rel="nofollow">CSS3</a></p></footer></body>
<!-- Mirrored from localhost/articulo.html?id=44 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Oct 2015 14:24:04 GMT -->
</html>