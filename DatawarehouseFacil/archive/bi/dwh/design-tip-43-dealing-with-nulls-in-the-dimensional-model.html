

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Design Tip #43: Dealing With Nulls In The Dimensional Model</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description">
		<meta name="application-name">
		<meta name="title">
		<link href="../../../favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="../../../resources/main.css">
	</head>
	

	<body>
	
		<div class="jumbotron1" id="jumbotron1">
			<div class="container">
				<h1 class="article-header">Design Tip #43: Dealing With Nulls In The Dimensional Model</h1>
				<div class="article-date">jueves, 6 de febrero de 2003</div>
			</div>
		</div>
	
		<hr id="anchor-point"/>
		<div class="container-fluid">
			<a href="../../../archive/bi/dwh/design-tip-43-dealing-with-nulls-in-the-dimensional-model.html#" class="navigationBars">
				<div class="iconBars closed">
					<span id="icon-bar1" class="iconBar colorChange background"></span>
					<span id="icon-bar2" class="iconBar colorChange background"></span>
					<span id="icon-bar3" class="iconBar colorChange background"></span>
				</div>
			</a>
			<div class="navLinks">
				<a id="link1" class="colorChange navLink link1" href="../../../index.html">Home</a>
				<a class="iconLink" href="../../../index.html"><i title="Home" id="icon1" class="fa fa-home colorChange link1"></i></a>
	
				<a id="link2" class="colorChange navLink link2" href="../../../about.html">Sobre mi</a>
				<a class="iconLink" href="../../../about.html"><i title="Sobre mi" id="icon2" class="fa fa-envelope colorChange link2"></i></a>

				<a id="link2" class="colorChange navLink link3" href="../../../archive.html">Archivo</a>
				<a class="iconLink" href="../../../about.html"><i title="Archivo" id="icon3" class="fa fa-archive colorChange link3"></i></a>
			</div>			
			
			<div class="row">
				<div class="content col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
					<div class="article">
						<p class="article-description"></p>				
						<div class="article-content">
							<div class="pf-content">
							<p>Most relational databases support the use of a null value to represent an absence of data. Nulls canÂ confuse both data warehouse developers and users because the database treats nulls differentlyÂ from blanks or zeros, even though they look like blanks or zeros. This design tip explores the threeÂ major areas where we find nulls in our source data and makes recommendations on how to handleÂ each situation.</p>
							<p><strong>Nulls as Fact Table Foreign Keys</strong><br>
							We encounter this potential situation in the source data for several reasons: either the foreign keyÂ value is not known at the time of extract, is (correctly) not applicable to the source measurement, orÂ is incorrectly missing from the source extract. Obviously, referential integrity is violated if we put aÂ null in a fact table column declared as a foreign key to a dimension table, because in a relationalÂ database, null is not equal to itself.</p>
							<p>In the first case, especially with an accumulating snapshot fact table, we sometimes find columnsÂ tracking events which have not yet occurred. For example, in an orders tracking accumulatingÂ snapshot, a business might receive an order on the 31st, but not ship until the next month. The factÂ table&#8217;s Ship_Date will not be known when the fact row is first inserted. In this case, Ship_Date is aÂ foreign key to the date dimension table, but will not join as users expect if we leave the value as null.Â That is, any fact reporting from the date table joined on Ship_Date will exclude all orders with a nullÂ Ship_Date. Most of our users get nervous when data disappears, so we recommend using aÂ surrogate key, which joins to a special record in the date dimension table with a description likeÂ &#8220;Data not yet available.&#8221;</p>
							<p>Similarly, there are cases when the foreign key is simply not applicable to the fact measurement,Â such as when promotion is a fact table foreign key, but not every fact row has a promotionÂ associated with it. Again, we&#8217;d include a special record in the dimension table with a value such asÂ &#8220;No promotion in effect.&#8221;</p>
							<p>In the case where the foreign key is missing from the source extract when it shouldn&#8217;t be, you have aÂ few options. You can assign it to another special record in the appropriate dimension with aÂ meaningful description like &#8220;Missing key,&#8221; or assign a specific record such as &#8220;Missing key for sourceÂ code #1234,&#8221; or write the row out to a suspense file. In all cases, you will need to troubleshoot theÂ offending row.</p>
							<p><strong>Nulls as Facts</strong><br>
							In this case, the null value has two potential meanings. Either the value did not exist, or ourÂ measurement system failed to capture the value. Either way, we generally leave the value as nullÂ because most database products will handle nulls properly in aggregate functions including SUM,Â MAX, MIN, COUNT, and AVG. Substituting a zero instead would improperly skew these aggregatedÂ calculations.</p>
							<p><strong>Nulls as Dimension Attributes</strong><br>
							We generally encounter dimension attribute nulls due to timing or dimension sub-setting. ForÂ example, perhaps not all the attributes have been captured yet, so we have some unknown attributesÂ for a period of time. Likewise, there may be certain attributes that only apply to a subset of theÂ dimension members. In either case, the same recommendation applies. Putting a null in these fieldsÂ can be confusing to the user, as it will appear as a blank on reports and pull-down menus, andÂ require special query syntax to find. Instead, we recommend substituting an appropriatelyÂ descriptive string, like &#8220;Unknown&#8221; or &#8220;Not provided.&#8221;</p>
							<p>Note that many data mining tools have different techniques for tracking nulls. You may need to doÂ some additional work beyond the above recommendations if you are creating an observation set forÂ data mining.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../../resources/jquery.min.js"></script>
		<script src="../../../resources/menu.js"></script>
			
		
		<a id="scrollUp" href="../../../archive/bi/dwh/design-tip-43-dealing-with-nulls-in-the-dimensional-model.html#top" title="Volver" style="position: fixed; z-index: 2147483647; display: none;">
			<i class="fa fa-chevron-up"></i>
		</a>
	</body>
</html>